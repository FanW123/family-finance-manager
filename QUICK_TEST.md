# 🧪 PWA 快速测试指南

## 步骤 1: 启动应用

```bash
# 在项目根目录执行
npm run dev
```

等待看到：
```
  VITE v5.x.x  ready in xxx ms
  ➜  Local:   http://localhost:3000/
  ➜  Network: http://192.168.x.x:3000/
```

## 步骤 2: 在浏览器中测试

### Chrome/Edge 浏览器（推荐）

1. **打开应用**
   - 访问 `http://localhost:3000`
   - 等待页面完全加载

2. **检查 Service Worker（最重要）**
   - 按 `F12` 打开开发者工具
   - 点击顶部 **Application** 标签
   - 左侧找到 **Service Workers**
   - ✅ 应该看到：
     ```
     sw.js
     Status: activated and is running
     ```

3. **检查 Manifest**
   - 在 **Application** 标签下
   - 左侧找到 **Manifest**
   - ✅ 应该看到 FirePath 的配置

4. **测试安装提示**
   - 等待 3-5 秒
   - ✅ 页面底部应该出现安装提示框
   - 或者地址栏右侧出现安装图标 📱

5. **测试离线功能**
   - 在 **Application** → **Service Workers**
   - 勾选 **Offline** 复选框
   - 刷新页面（F5）
   - ✅ 页面应该仍能正常显示（从缓存加载）

## 步骤 3: 在手机上测试

### iPhone Safari

1. **确保在同一 Wi-Fi**
   - 手机和电脑连接同一个 Wi-Fi

2. **获取电脑 IP 地址**
   ```bash
   # 在终端运行
   ipconfig getifaddr en0
   # 或者
   ifconfig | grep "inet " | grep -v 127.0.0.1
   ```
   会显示类似：`192.168.1.100`

3. **在手机 Safari 中访问**
   - 打开 Safari
   - 输入：`http://192.168.1.100:3000`
   - 等待页面加载

4. **添加到主屏幕**
   - 点击底部的分享按钮（方框+向上箭头）
   - 向下滚动，找到 **"添加到主屏幕"**
   - 可以修改名称（默认是 FirePath）
   - 点击 **"添加"**

5. **测试独立模式**
   - 从主屏幕打开 FirePath
   - ✅ 应该以独立窗口运行（没有浏览器地址栏）

## ✅ 测试检查清单

### 桌面浏览器
- [ ] Service Worker 已注册并运行
- [ ] Manifest 配置正确
- [ ] 安装提示出现
- [ ] 可以成功安装
- [ ] 离线模式正常工作

### 手机浏览器
- [ ] 可以正常访问
- [ ] 可以添加到主屏幕
- [ ] 独立窗口模式正常
- [ ] 所有功能正常工作

## 🐛 如果遇到问题

### Service Worker 未注册

**检查：**
1. 打开浏览器控制台（F12 → Console）
2. 查看是否有错误信息
3. 访问 `http://localhost:3000/sw.js` 看文件是否存在

**解决：**
- 如果文件不存在，检查 `public/sw.js` 文件
- 清除浏览器缓存后重试

### 安装提示不显示

**可能原因：**
- 已经安装过（检查是否在主屏幕）
- 浏览器不支持（使用 Chrome/Edge）
- 需要 HTTPS（生产环境）

**解决：**
- 使用 Chrome 或 Edge 浏览器
- 清除浏览器数据
- 检查是否满足 PWA 安装条件

### 手机无法访问

**检查：**
- 手机和电脑是否在同一 Wi-Fi
- 防火墙是否阻止了端口 3000
- IP 地址是否正确

**解决：**
- 检查电脑防火墙设置
- 确认 `vite.config.ts` 中 `host: '0.0.0.0'` 已设置

## 🎯 测试重点

1. **基本功能**：确保所有功能在 PWA 模式下正常工作
2. **离线访问**：断开网络后仍能查看已缓存的内容
3. **安装体验**：安装流程是否顺畅
4. **独立模式**：安装后是否以独立窗口运行

## 📝 测试结果记录

测试完成后，记录：
- 使用的浏览器和版本
- 测试的设备（桌面/手机）
- 遇到的问题
- 功能是否正常

---

**提示**：第一次测试建议在桌面 Chrome 浏览器进行，因为它的 PWA 支持最完善，调试工具也最全面。

